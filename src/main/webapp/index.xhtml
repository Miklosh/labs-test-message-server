<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:uib="http://engagepoint.com/uib"
                template="template/template.xhtml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://primefaces.org/ui ">
    <ui:define name="content">

        <h:form>

            <p:tabView id="tabView" dynamic="true">

                <p:tab title="Email Messages" id="EmailMessages">

                    <p:panel id="FilterPanel1">
                        <!--<h:outputText value="Sender "/>-->
                        <p:inputText id="inputEmailSender" value="#{emailService.senderForFilteringEmail}"/>
                        <p:watermark for="inputEmailSender" value="input sender.."/>
                        <uib:buttonGroup>
                            <p:commandButton value="Do Filter" update="EmailTable"
                                             actionListener="#{emailService.doFilterEmail}" styleClass="small"/>
                            <p:commandButton value="Cancel Filter" update="EmailTable,inputEmailSender"
                                             actionListener="#{emailService.cancelFilterEmail}" styleClass="small"/>
                        </uib:buttonGroup>
                    </p:panel>



                    <uib:dataTable id="EmailTable" var="email" value="#{emailService.emailDTOList}" rows="10"
                                   summary="Table with pagination"
                                   paginator="true" paginatorAlwaysVisible="false"
                                   paginatorPosition="top">

                        <f:facet name="header">

                            <uib:buttonGroup>
                                <p:commandButton value="Refresh Email" icon="ui-icon-refresh" update="EmailTable"
                                                 styleClass="small blue"
                                                 actionListener="#{emailService.refreshEmail}"/>
                                <p:commandButton value="Delete Email" update="@(form)" styleClass="small blue"
                                                 actionListener="#{emailService.deleteCheckedEmails}"/>

                            </uib:buttonGroup>
                        </f:facet>

                        <uib:column style="width: 3%">
                            <f:facet name="header">
                                <p:outputLabel for="selectAllEmailReportChkBox" value="select all checkbox"
                                               style="display: none;"/>
                                <p:selectBooleanCheckbox id="selectAllEmailReportChkBox"
                                                         onchange="selectAllChkBox(this,'reportRecordEmailChkBox')"/>
                            </f:facet>
                            <p:outputLabel for="reportRecordEmailChkBox" value="select row checkbox"
                                           style="display: none;"/>
                            <p:selectBooleanCheckbox value="#{email.flag}" id="reportRecordEmailChkBox"
                                                     onchange="selectAllChkBoxDisable('selectAllEamilReportChkBox')"/>
                        </uib:column>

                        <p:column sortBy="#{email.id}" headerText="id" style="width: 2%">
                            <h:outputText value="#{email.id}"/>
                        </p:column>

                        <p:column sortBy="#{email.deliveryDate}" headerText="deliveryDate" style="width: 15%">
                            <h:outputText value="#{email.deliveryDate}"/>
                        </p:column>

                        <p:column id="sender" sortBy="#{email.sender}" filterBy="sender" headerText="sender"
                                  style="width: 10%">
                            <h:outputText value="#{email.sender}"/>
                        </p:column>

                        <p:column sortBy="#{email.subject}" headerText="subject" style="width: 10%">
                            <h:outputText value="#{email.subject}"/>
                        </p:column>

                        <p:column sortBy="#{email.body}" headerText="Text" style="width: 50%">
                            <h:outputText value="#{email.body}"/>
                        </p:column>

                        <p:column headerText="attachments" style="width: 10%">
                            <p:dataList value="#{email.attachmentCollection}" var="attachment" type="ordered">
                                <p:commandButton id="attachmentId" value="Download" ajax="false" style="visibility: hidden;
                            width: 0px; height: 0px; font-size: 9pt">
                                    <p:fileDownload value="#{attachmentService.downloadAttachment(attachment.id)}"/>
                                </p:commandButton>
                                <a href="#"
                                   onclick="document.getElementById('#{p:component('attachmentId')}').click();">
                                    #{attachment.name}</a>
                            </p:dataList>
                        </p:column>

                    </uib:dataTable>


                </p:tab>

                <p:tab title="SMS Messages" id="SmsMessages">

                    <p:panel id="FilterPanel2">
                        <!--<h:outputText value="Sender"/>-->
                        <p:inputText id="inputSmsSender" value="#{smsService.senderForFilteringSms}"/>
                        <p:watermark for="inputSmsSender" value="input sender.."/>
                        <uib:buttonGroup>
                            <p:commandButton id="DoFilter" value="Do Filter" update="SmsTable" styleClass="small"
                                             actionListener="#{smsService.doFilterSms}"/>
                            <p:commandButton id="CancelFilter" value="Cancel Filter" update="SmsTable,inputSmsSender" styleClass="small"
                                             actionListener="#{smsService.cancelFilterSms}"/>
                        </uib:buttonGroup>
                    </p:panel>

                    <p:panel id="quickSearchSmsPanel" name="Quick Search">
                        <p:inputText value="#{smsService.quickSearch}"/>
                        <p:commandButton value="Search" update="SmsTable"
                                         actionListener="#{smsService.doQuickSearch}" styleClass="small"/>
                    </p:panel>

                    <uib:dataTable id="SmsTable" var="sms" value="#{smsService.smsDTOList}"
                                   paginator="true" rows="10" paginatorAlwaysVisible="false"
                                   paginatorPosition="top"
                                   sortBy="sender" sortOrder="descending"
                                   styleClass="smsTable">

                        <f:facet name="header">
                            <uib:buttonGroup>
                                <p:commandButton value="Refresh SMS"
                                                 icon="ui-icon-refresh" update="SmsTable" styleClass="small blue"
                                                 actionListener="#{smsService.refreshSms}"/>
                                <p:commandButton value="Delete Sms" update="@(form)" styleClass="small blue"
                                                 actionListener="#{smsService.deleteCheckedSMS}"/>

                            </uib:buttonGroup>
                        </f:facet>

                        <uib:column style="width: 3%">
                            <f:facet name="header">
                                <p:outputLabel for="selectAllSMSReportChkBox" value="select all checkbox"
                                               style="display: none;"/>
                                <p:selectBooleanCheckbox id="selectAllSMSReportChkBox"
                                                         onchange="selectAllChkBox(this,'reportRecordSMSChkBox')"/>
                            </f:facet>
                            <p:outputLabel for="reportRecordSMSChkBox" value="select row checkbox"
                                           style="display: none;"/>
                            <p:selectBooleanCheckbox value="#{sms.flag}" id="reportRecordSMSChkBox"
                                                     onchange="selectAllChkBoxDisable('selectAllSMSReportChkBox')"/>
                        </uib:column>

                        <p:column id="columnId" sortBy="#{sms.id}" headerText="id" style="width: 2%">
                            <h:outputText value="#{sms.id}"/>
                        </p:column>

                        <p:column id="sortByid" sortBy="#{sms.deliveryDate}" headerText="deliveryDate" style="width: 15%">
                            <h:outputText value="#{sms.deliveryDate}"/>
                        </p:column>

                        <p:column sortBy="#{sms.sender}" headerText="sender" style="width: 10%">
                            <h:outputText value="#{sms.sender}"/>
                        </p:column>

                        <!--<p:column headerText="receiver">
                            <h:outputText value="#{email.receiver}"/>
                        </p:column>-->

                        <p:column sortBy="#{sms.body}" headerText="Text">
                            <h:outputText value="#{sms.body}"/>
                        </p:column>
                    </uib:dataTable>

                </p:tab>

                <p:tab title="Server Info" id="serverInfo">
                    <h:panelGrid columns="2" cellpadding="10">
                        <h:outputText id="emailServerHostNameLabel" value="Email server host:"
                                      style="font-weight: bold"/>
                        <h:outputText id="emailServerHostName" value="#{serverInfoService.SMTPhostName}"/>

                        <h:outputText id="emailServerPortLabel" value="Email server port:" style="font-weight: bold"/>
                        <h:outputText id="emailServerPort" value="#{serverInfoService.SMTPport}"/>

                        <h:outputText id="smsServerHostNameLabel" value="SMS Server host:" style="font-weight: bold"/>
                        <h:outputText id="smsServerHostName" value="#{serverInfoService.SMPPhost}"/>

                        <h:outputText id="smsServerPortLabel" value="SMS server port:" style="font-weight: bold"/>
                        <h:outputText id="smsServerPort" value="#{serverInfoService.SMPPport}"/>
                    </h:panelGrid>
                </p:tab>

            </p:tabView>

        </h:form>

    </ui:define>

</ui:composition>
